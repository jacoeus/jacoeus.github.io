<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.1.1"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><meta name="google-site-verification" content="1he7C7Wt3l_3CNQSu4T8-ZTZacFv5BWFyxQZs38IW7I"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css"><script src="/lib/pace/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"jacoeus.github.io",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"mac"},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="云上开发，高效智能–阿里云ECS Cloudbuild开发者大赛算法挑战赛道是在天池平台进行的以阿里云弹性计算服务为背景的故障预测算法设计比赛，主要是对多个数据文件进行处理后训练模型在线预测样本是否会在2天内宕机 这次比赛也是我第一次参加天池相关比赛，事实上在算法方面也缺乏积累，过程中进行了挺多的尝试和学习，最终虽然有幸以复赛第3进入决赛，但是因为算法方面相较其他组做的就很普通，决赛就答了个第六\"><meta property="og:type" content="article"><meta property="og:title" content="阿里云ECS开发者大赛算法赛道参赛总结"><meta property="og:url" content="https://jacoeus.github.io/2021/11/25/%E9%98%BF%E9%87%8C%E4%BA%91ECS%E5%BC%80%E5%8F%91%E8%80%85%E5%A4%A7%E8%B5%9B%E7%AE%97%E6%B3%95%E8%B5%9B%E9%81%93%E5%8F%82%E8%B5%9B%E6%80%BB%E7%BB%93/index.html"><meta property="og:site_name" content="JacoeusのBlog"><meta property="og:description" content="云上开发，高效智能–阿里云ECS Cloudbuild开发者大赛算法挑战赛道是在天池平台进行的以阿里云弹性计算服务为背景的故障预测算法设计比赛，主要是对多个数据文件进行处理后训练模型在线预测样本是否会在2天内宕机 这次比赛也是我第一次参加天池相关比赛，事实上在算法方面也缺乏积累，过程中进行了挺多的尝试和学习，最终虽然有幸以复赛第3进入决赛，但是因为算法方面相较其他组做的就很普通，决赛就答了个第六\"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2021-11-25T07:03:35.000Z"><meta property="article:modified_time" content="2022-01-12T01:39:46.645Z"><meta property="article:author" content="tang ziyin"><meta property="article:tag" content="AIOps"><meta property="article:tag" content="机器学习"><meta property="article:tag" content="比赛经历"><meta property="article:tag" content="天池大赛"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://jacoeus.github.io/2021/11/25/%E9%98%BF%E9%87%8C%E4%BA%91ECS%E5%BC%80%E5%8F%91%E8%80%85%E5%A4%A7%E8%B5%9B%E7%AE%97%E6%B3%95%E8%B5%9B%E9%81%93%E5%8F%82%E8%B5%9B%E6%80%BB%E7%BB%93/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>阿里云ECS开发者大赛算法赛道参赛总结 | JacoeusのBlog</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">JacoeusのBlog</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">Hello World</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-友链"><a href="/links/" rel="section"><i class="fa fa-link fa-fw"></i>友链</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jacoeus.github.io/2021/11/25/%E9%98%BF%E9%87%8C%E4%BA%91ECS%E5%BC%80%E5%8F%91%E8%80%85%E5%A4%A7%E8%B5%9B%E7%AE%97%E6%B3%95%E8%B5%9B%E9%81%93%E5%8F%82%E8%B5%9B%E6%80%BB%E7%BB%93/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="tang ziyin"><meta itemprop="description" content="Awake, arise or be for ever fall&#39;n"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="JacoeusのBlog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">阿里云ECS开发者大赛算法赛道参赛总结</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2021-11-25 15:03:35" itemprop="dateCreated datePublished" datetime="2021-11-25T15:03:35+08:00">2021-11-25</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-01-12 09:39:46" itemprop="dateModified" datetime="2022-01-12T09:39:46+08:00">2022-01-12</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">机器学习</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E6%AF%94%E8%B5%9B%E7%BB%8F%E5%8E%86/" itemprop="url" rel="index"><span itemprop="name">比赛经历</span></a> </span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span id="busuanzi_value_page_pv"></span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Valine：</span> <a title="valine" href="/2021/11/25/%E9%98%BF%E9%87%8C%E4%BA%91ECS%E5%BC%80%E5%8F%91%E8%80%85%E5%A4%A7%E8%B5%9B%E7%AE%97%E6%B3%95%E8%B5%9B%E9%81%93%E5%8F%82%E8%B5%9B%E6%80%BB%E7%BB%93/#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/2021/11/25/%E9%98%BF%E9%87%8C%E4%BA%91ECS%E5%BC%80%E5%8F%91%E8%80%85%E5%A4%A7%E8%B5%9B%E7%AE%97%E6%B3%95%E8%B5%9B%E9%81%93%E5%8F%82%E8%B5%9B%E6%80%BB%E7%BB%93/" itemprop="commentCount"></span></a></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>4.9k</span></span></div></header><div class="post-body" itemprop="articleBody"><p><a target="_blank" rel="noopener" href="https://tianchi.aliyun.com/competition/entrance/531906/introduction">云上开发，高效智能–阿里云ECS Cloudbuild开发者大赛算法挑战赛道</a>是在天池平台进行的以阿里云弹性计算服务为背景的故障预测算法设计比赛，主要是对多个数据文件进行处理后训练模型在线预测样本是否会在2天内宕机</p><p>这次比赛也是我第一次参加天池相关比赛，事实上在算法方面也缺乏积累，过程中进行了挺多的尝试和学习，最终虽然有幸以复赛第3进入决赛，但是因为算法方面相较其他组做的就很普通，决赛就答了个第六\捂脸</p><p>在比赛记录部分整理了比赛过程中进行的主要尝试，希望能对其他同学有所帮助</p><p><a target="_blank" rel="noopener" href="https://tianchi.aliyun.com/forum/postDetail?spm=5176.12586969.1002.9.38cb5bd9ZBI54Q&amp;postId=294919">https://tianchi.aliyun.com/forum/postDetail?spm=5176.12586969.1002.9.38cb5bd9ZBI54Q&amp;postId=294919</a></p><a id="more"></a><h1 id="赛题分析"><a href="#赛题分析" class="headerlink" title="赛题分析"></a>赛题分析</h1><p>赛题背景：以阿里云弹性计算服务（ECS）为背景，要求设计故障预测算法对内存系统异常引起的服务器宕机进行预测来避免服务器异常导致的业务受损，保证上层客户应用的可用性与稳定性</p><p>数据：服务器配置信息、服务器异常日志数据（57种异常）、服务器的宕机记录以及标签样本信息</p><p>要求：基于上述数据，预测服务器在未来2天内是否会发生宕机</p><p>评价指标：F1_score作为评价指标</p><h2 id="问题难点"><a href="#问题难点" class="headerlink" title="问题难点"></a>问题难点</h2><ul><li><p>整合服务器配置信息、服务器异常日志数据、服务器的宕机记录以及标签样本信息提取有效特征</p></li><li><p>需要对57种异常提取特征</p></li><li><p>服务器异常日志较大，需要兼顾数据处理的时间开销</p></li><li><p>标签样本极不平衡</p></li></ul><h2 id="数据集分析"><a href="#数据集分析" class="headerlink" title="数据集分析"></a>数据集分析</h2><ul><li><p>异常停止发生到宕机普遍存在一段空白期，宕机时间中54/206的空白期大于两天，89/206空白期小于一小时 =&gt; 空白期会影响回归预测宕机时间的效果</p></li><li><p>发现存在33/206的宕机事件异常只集中在宕机前5~6天，60/206的宕机时间中异常集中在宕机前1小时内=&gt;认为存在多种宕机表现，可以进行多分类（判断黑样本有限，多分类很难达到预期效果）</p></li><li><p>单个异常的出现不存在明显规律，在不同场景下，可能周期性出现或者随机出现=&gt;很难对某个异常针对其特点（周期性、周期持续时间等）设计特征</p></li><li><p>发现存在仅异常12导致宕机的情况=&gt;认为异常12对宕机存在显著的关联性</p></li></ul><h2 id="基本思路"><a href="#基本思路" class="headerlink" title="基本思路"></a>基本思路</h2><ul><li>基于给出的标签样本对异常统一提取特征并进行不平衡的二分类，并对存在异常12的样本额外训练模型</li></ul><h1 id="特征工程"><a href="#特征工程" class="headerlink" title="特征工程"></a>特征工程</h1><ul><li><p>分析宕机发生的原因，同时发生多种异常、异常发生的数量/频率达到一定程度、异常持续发生</p></li><li><p>服务器配置特征+不同粒度窗口下异常出现的均值 + 异常出现的峰值（对所有异常整体和单个异常分别考查）</p></li><li><p>标记类别特征，其他特征进行归一化（直接除以最大值）</p></li><li><p>特征选择尝试lightgbm feature_importance和欠采样+树模型，选择前者</p></li></ul><h1 id="模型构建"><a href="#模型构建" class="headerlink" title="模型构建"></a>模型构建</h1><ul><li><p>尝试了lightgbm和imbalanced-learn（选择lightgbm）</p></li><li><p>对出现异常12的样本进行建模，异常12模型在本地测试时假阴性低，使用减权的方式排除被预测为False的样本，结合lightgbm五折交叉验证训练来保证稳定性，对所有样本进行训练，预测时选出超过一定阈值的样本标记为黑样本</p></li><li><p>本地模型验证：</p><ul><li><p>train_test_split来分割训练集测试集容易过拟合（使用某个服务器样本来预测该服务器的样本成绩会虚高）</p></li><li><p>随机选择部分服务器的所有样本作为测试集（同时保证测试集中黑白样本比例），来保证模型的泛化性</p></li></ul></li></ul><h1 id="总结-amp-改进"><a href="#总结-amp-改进" class="headerlink" title="总结&amp;改进"></a>总结&amp;改进</h1><ul><li><p>复赛成绩0.45，排名第3</p></li><li><p>根据数据集分析构建模型，包括主二分类模型和针对异常12的模型，且异常12的模型特征复用了主模型的特征</p></li><li><p>多次本地测试和线上运行成绩稳定，具有良好的泛化性</p></li><li><p>使用PostgreSQL对异常日志数据进行存储，可以使用扩展TimescaleDB来高效提取复杂的时序特征</p></li><li><p>在实际环境中，考虑根据宕机信息设计训练集，对不同宕机情况预先进行多分类（尤其针对类似异常集中在宕机时间前5天附近的情况）</p></li><li><p>尝试过程中发现在训练集利用样本时间后的部分异常信息来进行训练能达到较好的效果（样本时间前5min之后发生异常作为训练集特征，样本时间前5min内发生异常作为测试集特征） ，可解释性有待探究</p></li></ul><h1 id="比赛记录"><a href="#比赛记录" class="headerlink" title="比赛记录"></a>比赛记录</h1><p>因为缺少参加机器学习相关比赛经验，过程中乱七八糟也做了挺多尝试，这边进行了一些记录</p><ul><li><p>赛题要求：比赛需要我们基于服务器的异常日志数据，来预测服务器在未来是否会发生宕机。提供了包括服务器配置信息、服务器异常日志数据、服务器的宕机记录以及一些预先打好标签的样本</p></li><li><p>基本思路：在找到异常日志数据中每个样本的服务器在采样时间点之前一段时间的异常日志信息，基于这些异常日志信息建立每个样本的特征，例如短时间内是否发生某个异常、某个异常发生的起止时间或者某个异常的出现次数等</p></li><li><p>主要难点：服务器异常日志数据量过大，16.7G大小的csv</p></li><li><p>尝试1：使用chunk分块进行读取处理，遍历一遍的时间开销便已经无法承受了</p></li><li><p>尝试2：考虑到服务器异常日志数据是有序排列的，于是希望能利用这个特点来快速定位到同一服务器的所有异常信息，为此标记了所有服务器异常信息在csv中的始末位置，但pandas似乎没有提供直接读取csv指定行数的方法，读取靠后的异常信息仍需要遍历几乎整个csv</p></li><li><p>尝试3：将原先的大csv按服务器不同分成小csv，从而能直接读取需要服务器的异常信息，然而很尴尬，始一开始运行分解csv的程序不久，笔记本存储空间就不够用了</p></li><li><p>尝试4：考虑到目标是进行快速的搜索，而需要处理的文件无法存放在内存，于是开始尝试使用数据库来。选择了PostgreSQL数据库来存储异常日志信息，因为只是进行搜索，为了提取特征更灵活就把服务器ip、异常事件、异常名称和自增id一起作为主键了，建表并导入数据</p></li><li><p>尝试5：利用数据库，于是可以通过遍历所有样本，将每个样本的服务器ip和采样时间加入到sql语句中在数据库查询并返回异常信息到一个Dataframe进行处理，来提取特征。但这样的时间开销还是很大，怀疑是有的服务器异常信息较多，从数据库传输异常信息到Dataframe进行处理仍然有很大的时间开销</p></li><li><p>尝试6：于是尝试在数据库中就完成特征提取，进行一些尝试并分别考察他们的时间开销，包括COUNT和GROUP BY的方法来获取每种异常的出现次数、EXISTS获取某种异常在短时间内是否发生、LIMIT 1和LIMIT 1 ORDER BY desc方法或者MIN、MAX结合GROUP BY方法来取到采样时间两天内每种异常出现的起止时间等，但直到最后的时间开销依旧不理想，猜测是某些服务器异常信息太多，采用WHERE语句限制时间和异常名称后将其异常信息加载到内存并进行操作的时间开销还是很大</p></li><li><p>尝试7：感觉使用数据库的时间开销始终较大，开始重新考虑数据处理方式。于是考虑在仅依赖于Pandas的情况下，如何对异常信息只是读取一次来进行特征提取。结合对异常信息的理解，通过分块读取异常信息进行简化，仅保留每个服务器每种异常的起止时间。将异常信息、服务器信息和样本信息按服务器名称连接起来，于是可以利用服务器的异常起止时间和样本采样时间构建特征。相较数据库的方案，可能无法获得一定时间内异常发生的次数，但仍可以粗略的得到异常持续的时间和采样前一段时间内是否发生异常等特征，且时间开销被极大压缩，能够在一分钟左右完成初赛测试集的预测。后来意识到这种方案涉及到穿越数据，但经过尝试在复赛测试集不存在穿越数据的情况下仅利用采样前5分钟之后是否发生异常这一特征和服务器信息就达到了0.4+的成绩，认为通过利用训练集样本时间之后的一些信息能够丰富数据，遂将该方案作为保留方案</p></li><li><p>尝试9：认为判断服务器是否会宕机是比两天内是否发生宕机更好的分类方案，可以通过分类算法先找出会发生宕机的服务器，再对其发生宕机的时间使用回归算法进行预测，取发生宕机时间小于两天的作为结果。但简单的进行尝试发现效果并不理想</p></li><li><p>尝试10：之前一直忽略了对给出数据进行分析的步骤，为了加深对数据的理解，观察了宕机服务器在宕机之前各服务器发生的异常、异常发生的起止时间及异常发生的时间间隔等。发现1：存在部分宕机发生前一些异常会间隔稳定的时间进行报错，而大部分异常报错时间比较随机，怀疑一些异常周期性的出现持续时间较长会导致异常。发现2：异常不再发生到宕机会间隔不同时间，大致分为，宕机5天前集中出现异常然后无异常至宕机发生（这种情况下如果卡在宕机前两天便很难进行预测）；宕机前40分钟左右开始，前5分钟左右异常不再出现；若干天前开始，6小时左右不再发生；一天前开始，最近1小时左右结束这几种情况。另外，存在部分宕机发生前一些异常会间隔稳定的时间进行报错，而大部分异常报错时间比较随机，怀疑一些异常周期性的出现持续时间较长会导致异常。发现3：存在部分单独异常12导致宕机的情况</p></li><li><p>尝试11：分析宕机发生的原因，同时发生多种异常or异常发生的数量/频率达到一定程度or单个异常持续时间较长，据此建立特征。结合方向1可以根据异常是否有周期性选择持续时间或频率作为对于该异常的特征。直觉来讲，随机报错的异常发生频率变高更容易导致宕机，间隔报错的异常持续一段时间可能导致宕机，多种异常同时出现容易导致宕机（待验证）</p></li><li><p>尝试12：简单的尝试取5min，1h，1day三个时间窗口中各种异常出现的次数作为特征，直接利用这些特征存在严重的过拟合现象。通过对不平衡数据集进行特征选择、调参和使用KFold对5折得到五个模型预测结果取均值等操作尝试提升泛化性</p></li><li><p>尝试13：重新考察数据，根据训练样本观察样本时间前异常发生的情况，部分样本存在例如样本时间前5min内异常较少而在更早的某个5min中大量出现，于是考虑在使用某个大的时间窗口中固定时间间隔异常出现数量的峰值作为特征，考虑到特征提取的效率，使用了前1h中每分钟出现异常的峰值作为特征，结合尝试12</p></li><li><p>尝试14：在尝试6的基础上优化查询方案，将每次查询结果具体到对应特征，每收集1000条样本的查询结果进行整合后写入用于最终训练的csv</p></li><li><p>尝试15：为了保证模型泛化性，进行特征工程方面的学习优化，根据经验找出类别特征，并对其他特征进行归一化。考虑到大部分特征选择方案不适用于不平衡场景，使用多次欠拟合结合树模型的方法进行特征选择，不过效果似乎没有直接使用lightgbm的feature_importance好</p></li><li><p>模型训练方面：官方给了已经打上标签的样本信息和服务器宕机信息供模型训练</p></li><li><p>基本方案：对训练集的样本信息加入提取的特征进行训练，考虑到数据集有不平衡的特性，尝试了lightgbm的is_unbalance参数和imbalanced-ensemble的一些算法</p></li><li><p>改进思路1：预测目标是是否会在两天内发生宕机，可以考虑回归算法预测宕机时间</p></li><li><p>改进思路2：充分利用服务器宕机信息，关注不可预测的服务器宕机和会发生宕机的服务器</p></li><li><p>改进思路3：认为判断服务器是否会宕机是比两天内是否发生宕机更好的分类方案，可以通过分类算法先找出会发生宕机的服务器，再对其发生宕机的时间使用回归算法进行预测，取发生宕机时间小于两天的作为结果</p></li><li><p>实现方案1：考虑是否会宕机可能是一个更有效的分类点，并且能降低数据集的不平衡性。于是，先筛除不可预测的样本，按照宕机信息将样本分为会发生宕机和不会发生宕机的情况，进行二分类的训练，在另一边将样本按照将要发生宕机的时间进行回归训练。将预测样本投入两个模型，满足会宕机且回归预测结果小于两天的预测样本作为结果输出。在判断结果时也可以按照白样本可能的数量适当调整作为二分类预测结果判断的阈值</p></li><li><p>实现方案2：结合数据处理时的发现，根据提供的服务器宕机信息将宕机按是否会宕机、异常最后出现到宕机的空白期长短进行多分类，再结合每个分类回归预测其</p></li><li><p>实现方案3：基于给出的标签样本对异常统一提取特征并进行不平衡的二分类，并对存在异常12的样本额外训练模型</p></li><li><p>方案1在前期的测试中表现不好（可能当时也还没能构建合理的测试方案），方案2黑样本不足，进一步进行多分类认为效果不好，于是最终使用了方案3</p></li></ul></div><div class="reward-container"><div></div><button onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'>打赏</button><div id="qr" style="display:none"><div style="display:inline-block"><img src="/images/alipay.jpg" alt="tang ziyin 支付宝"><p>支付宝</p></div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/AIOps/" rel="tag"># AIOps</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag"># 机器学习</a> <a href="/tags/%E6%AF%94%E8%B5%9B%E7%BB%8F%E5%8E%86/" rel="tag"># 比赛经历</a> <a href="/tags/%E5%A4%A9%E6%B1%A0%E5%A4%A7%E8%B5%9B/" rel="tag"># 天池大赛</a></div><div class="post-nav"><div class="post-nav-item"><a href="/2021/11/25/JustEnoughScalaforSpark%E7%AC%94%E8%AE%B0/" rel="prev" title="JustEnoughScalaforSpark笔记"><i class="fa fa-chevron-left"></i> JustEnoughScalaforSpark笔记</a></div><div class="post-nav-item"><a href="/2021/12/13/%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/" rel="next" title="日志分析算法学习">日志分析算法学习 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="valine-comments"></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%B5%9B%E9%A2%98%E5%88%86%E6%9E%90"><span class="nav-number">1.</span> <span class="nav-text">赛题分析</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E9%9A%BE%E7%82%B9"><span class="nav-number">1.1.</span> <span class="nav-text">问题难点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E9%9B%86%E5%88%86%E6%9E%90"><span class="nav-number">1.2.</span> <span class="nav-text">数据集分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%80%9D%E8%B7%AF"><span class="nav-number">1.3.</span> <span class="nav-text">基本思路</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%89%B9%E5%BE%81%E5%B7%A5%E7%A8%8B"><span class="nav-number">2.</span> <span class="nav-text">特征工程</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A8%A1%E5%9E%8B%E6%9E%84%E5%BB%BA"><span class="nav-number">3.</span> <span class="nav-text">模型构建</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-amp-%E6%94%B9%E8%BF%9B"><span class="nav-number">4.</span> <span class="nav-text">总结&amp;改进</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%AF%94%E8%B5%9B%E8%AE%B0%E5%BD%95"><span class="nav-number">5.</span> <span class="nav-text">比赛记录</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/"><img class="site-author-image" itemprop="image" alt="tang ziyin" src="/images/avatar.jpg"></a><p class="site-author-name" itemprop="name">tang ziyin</p><div class="site-description" itemprop="description">Awake, arise or be for ever fall&#39;n</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">15</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">10</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">31</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/jacoeus" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;jacoeus" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:jacoeus@qq.com" title="E-Mail → mailto:jacoeus@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">tang ziyin</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-chart-area"></i> </span><span class="post-meta-item-text">站点总字数：</span> <span title="站点总字数">72k</span></div><div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动</div><div class="busuanzi-count"><script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-divider">|</span> <span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/pjax/pjax.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});</script><script src="/js/local-search.js"></script><div id="pjax"><script>NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//cdnjs.cloudflare.com/ajax/libs/valine/1.3.10/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'iogdw17Nj7hJHEGAgwRDUDrW-gzGzoHsz',
      appKey     : 'dVrERgoAN8k3ElI9ISHu1itV',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});</script></div></body></html>